<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ë©”íŠ¸ë¡œ í…ŒìŠ¤íŠ¸</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f0f0f0;
    }
    
    .section {
      background: white;
      padding: 20px;
      margin: 20px 0;
      border-radius: 10px;
      border: 3px solid #007aff;
    }
    
    h1 {
      color: #007aff;
      border-bottom: 3px solid #007aff;
      padding-bottom: 10px;
    }
    
    h2 {
      color: #333;
      font-size: 1.2rem;
      margin-bottom: 15px;
    }
    
    .upload-box {
      border: 3px dashed #ccc;
      padding: 40px;
      text-align: center;
      border-radius: 10px;
      cursor: pointer;
      background: #fafafa;
    }
    
    .upload-box:hover {
      border-color: #007aff;
      background: #e3f2fd;
    }
    
    img {
      max-width: 100%;
      border-radius: 8px;
      margin-top: 10px;
    }
    
    .table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
    }
    
    .table td {
      border: 1px solid #ddd;
      padding: 10px;
    }
    
    .table td:first-child {
      background: #f5f5f5;
      font-weight: bold;
      width: 150px;
    }
    
    input, textarea {
      width: 100%;
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
    }
    
    textarea {
      min-height: 80px;
      resize: vertical;
    }
    
    button {
      padding: 15px 30px;
      font-size: 16px;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      margin: 5px;
      color: white;
    }
    
    .btn-save {
      background: linear-gradient(135deg, #11998e, #38ef7d);
    }
    
    .btn-clear {
      background: linear-gradient(135deg, #ff6b6b, #ee5a6f);
    }
    
    .status {
      background: #fff3cd;
      padding: 15px;
      border-radius: 8px;
      margin: 15px 0;
      border-left: 4px solid #ff9500;
    }
  </style>
</head>
<body>

<h1>ğŸ—ï¸ (ì£¼)ë©”íŠ¸ë¡œ R&S AI - ê°„ë‹¨ í…ŒìŠ¤íŠ¸ ë²„ì „</h1>

<div class="status">
  âš ï¸ <strong>ì´ ì„¹ì…˜ë“¤ì´ ëª¨ë‘ ë³´ì´ë©´ ì •ìƒì…ë‹ˆë‹¤!</strong><br>
  ë§Œì•½ ì´ ë©”ì‹œì§€ê°€ ë³´ì´ì§€ ì•ŠëŠ”ë‹¤ë©´ ë¸Œë¼ìš°ì €ì—ì„œ íŒŒì¼ì„ ì—´ì§€ ì•Šì€ ê²ƒì…ë‹ˆë‹¤.
</div>

<!-- ì„¹ì…˜ 1: ì‚¬ì§„ ì—…ë¡œë“œ -->
<div class="section">
  <h2>ğŸ“¸ ì„¹ì…˜ 1: ì™„ë£Œí™•ì¸ì„œ ì‚¬ì§„</h2>
  <div class="upload-box" onclick="document.getElementById('photo1').click()">
    í´ë¦­í•˜ì—¬ ì‚¬ì§„ ì„ íƒ
  </div>
  <input type="file" id="photo1" accept="image/*" style="display:none">
  <img id="preview1" style="display:none">
</div>

<!-- ì„¹ì…˜ 2: OCR ê²°ê³¼ -->
<div class="section">
  <h2>ğŸ“„ ì„¹ì…˜ 2: OCR ì¸ì‹ ê²°ê³¼</h2>
  <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; min-height: 100px;">
    <div id="ocrResult">ì‚¬ì§„ì„ ì„ íƒí•˜ë©´ ì—¬ê¸°ì— OCR ê²°ê³¼ê°€ í‘œì‹œë©ë‹ˆë‹¤.</div>
  </div>
</div>

<!-- ì„¹ì…˜ 3: ì…ë ¥ í…Œì´ë¸” -->
<div class="section">
  <h2>ğŸ“‹ ì„¹ì…˜ 3: ë°ì´í„° ì…ë ¥</h2>
  <table class="table">
    <tr>
      <td>í˜„ì¥ëª…</td>
      <td><input type="text" id="site" placeholder="í˜„ì¥ëª… ì…ë ¥"></td>
    </tr>
    <tr>
      <td>í•˜ì No</td>
      <td><input type="text" id="haja" placeholder="í•˜ìë²ˆí˜¸ ì…ë ¥"></td>
    </tr>
    <tr>
      <td>ë™/í˜¸ìˆ˜</td>
      <td><input type="text" id="unit" placeholder="ì˜ˆ: 101ë™ 1001í˜¸"></td>
    </tr>
    <tr>
      <td>ì ‘ìˆ˜ì¼</td>
      <td><input type="date" id="date"></td>
    </tr>
    <tr>
      <td>í•˜ìë‚´ìš©</td>
      <td><textarea id="memo" placeholder="í•˜ì ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea></td>
    </tr>
  </table>
</div>

<!-- ì„¹ì…˜ 4: ì‘ì—… ì‚¬ì§„ -->
<div class="section">
  <h2>ğŸ“¸ ì„¹ì…˜ 4: ì‘ì—… ì‚¬ì§„</h2>
  
  <h3 style="margin-top: 20px;">ìˆ˜ë¦¬ ì „</h3>
  <div class="upload-box" onclick="document.getElementById('photo2').click()">
    í´ë¦­í•˜ì—¬ ìˆ˜ë¦¬ ì „ ì‚¬ì§„ ì„ íƒ
  </div>
  <input type="file" id="photo2" accept="image/*" style="display:none">
  <img id="preview2" style="display:none">
  
  <h3 style="margin-top: 20px;">ìˆ˜ë¦¬ í›„</h3>
  <div class="upload-box" onclick="document.getElementById('photo3').click()">
    í´ë¦­í•˜ì—¬ ìˆ˜ë¦¬ í›„ ì‚¬ì§„ ì„ íƒ
  </div>
  <input type="file" id="photo3" accept="image/*" style="display:none">
  <img id="preview3" style="display:none">
</div>

<!-- ì„¹ì…˜ 5: ë²„íŠ¼ -->
<div class="section" style="text-align: center;">
  <button class="btn-save" onclick="saveData()">ğŸ’¾ ë°ì´í„° ì €ì¥</button>
  <button class="btn-clear" onclick="clearData()">ğŸ—‘ï¸ ì´ˆê¸°í™”</button>
</div>

<!-- ì„¹ì…˜ 6: ì €ì¥ëœ ë°ì´í„° -->
<div class="section">
  <h2>ğŸ’¾ ì„¹ì…˜ 6: ì €ì¥ëœ ë°ì´í„°</h2>
  <div id="savedData" style="background: #f8f9fa; padding: 15px; border-radius: 8px; min-height: 50px;">
    ì €ì¥ëœ ë°ì´í„°ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.
  </div>
</div>

<script>
console.log('âœ… ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ë¨');

// ì‚¬ì§„ ë¯¸ë¦¬ë³´ê¸°
document.getElementById('photo1').addEventListener('change', function(e) {
  const file = e.target.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = function(event) {
      const img = document.getElementById('preview1');
      img.src = event.target.result;
      img.style.display = 'block';
      
      // ê°„ë‹¨í•œ OCR ì‹œë®¬ë ˆì´ì…˜ (ì‹¤ì œë¡œëŠ” Tesseract.js ì‚¬ìš©)
      document.getElementById('ocrResult').innerHTML = `
        <strong>OCR ë¶„ì„ ì™„ë£Œ!</strong><br>
        íŒŒì¼ëª…: ${file.name}<br>
        í¬ê¸°: ${(file.size / 1024).toFixed(2)} KB<br><br>
        <em>ì‹¤ì œ ë²„ì „ì—ì„œëŠ” ì—¬ê¸°ì— ì¸ì‹ëœ í…ìŠ¤íŠ¸ê°€ í‘œì‹œë©ë‹ˆë‹¤.</em>
      `;
      
      alert('âœ… ì‚¬ì§„ì´ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!');
    };
    reader.readAsDataURL(file);
  }
});

document.getElementById('photo2').addEventListener('change', function(e) {
  const file = e.target.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = function(event) {
      const img = document.getElementById('preview2');
      img.src = event.target.result;
      img.style.display = 'block';
    };
    reader.readAsDataURL(file);
  }
});

document.getElementById('photo3').addEventListener('change', function(e) {
  const file = e.target.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = function(event) {
      const img = document.getElementById('preview3');
      img.src = event.target.result;
      img.style.display = 'block';
    };
    reader.readAsDataURL(file);
  }
});

// ë°ì´í„° ì €ì¥
function saveData() {
  const data = {
    site: document.getElementById('site').value,
    haja: document.getElementById('haja').value,
    unit: document.getElementById('unit').value,
    date: document.getElementById('date').value,
    memo: document.getElementById('memo').value,
    timestamp: new Date().toLocaleString('ko-KR')
  };
  
  console.log('ì €ì¥í•  ë°ì´í„°:', data);
  
  // LocalStorageì— ì €ì¥
  const allData = JSON.parse(localStorage.getItem('METRO_TEST') || '[]');
  allData.push(data);
  localStorage.setItem('METRO_TEST', JSON.stringify(allData));
  
  alert('âœ… ë°ì´í„°ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤! (ì´ ' + allData.length + 'ê±´)');
  
  // ì €ì¥ëœ ë°ì´í„° í‘œì‹œ
  displaySavedData();
}

// ì €ì¥ëœ ë°ì´í„° í‘œì‹œ
function displaySavedData() {
  const allData = JSON.parse(localStorage.getItem('METRO_TEST') || '[]');
  const container = document.getElementById('savedData');
  
  if (allData.length === 0) {
    container.innerHTML = 'ì €ì¥ëœ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.';
    return;
  }
  
  let html = '<strong>ì´ ' + allData.length + 'ê±´ ì €ì¥ë¨</strong><br><br>';
  
  allData.reverse().forEach((item, index) => {
    html += `
      <div style="background: white; padding: 10px; margin: 10px 0; border-radius: 5px; border: 1px solid #ddd;">
        <strong>${index + 1}ë²ˆì§¸ ë°ì´í„°</strong><br>
        í˜„ì¥ëª…: ${item.site || '-'}<br>
        í•˜ìNo: ${item.haja || '-'}<br>
        ë™/í˜¸ìˆ˜: ${item.unit || '-'}<br>
        ì €ì¥ì‹œê°„: ${item.timestamp}
      </div>
    `;
  });
  
  container.innerHTML = html;
}

// ì´ˆê¸°í™”
function clearData() {
  if (confirm('ëª¨ë“  ì…ë ¥ì„ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
    document.getElementById('site').value = '';
    document.getElementById('haja').value = '';
    document.getElementById('unit').value = '';
    document.getElementById('date').value = '';
    document.getElementById('memo').value = '';
    
    document.getElementById('preview1').style.display = 'none';
    document.getElementById('preview2').style.display = 'none';
    document.getElementById('preview3').style.display = 'none';
    
    document.getElementById('ocrResult').innerHTML = 'ì‚¬ì§„ì„ ì„ íƒí•˜ë©´ ì—¬ê¸°ì— OCR ê²°ê³¼ê°€ í‘œì‹œë©ë‹ˆë‹¤.';
    
    alert('âœ… ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤!');
  }
}

// í˜ì´ì§€ ë¡œë“œ ì‹œ ì €ì¥ëœ ë°ì´í„° í‘œì‹œ
window.addEventListener('load', function() {
  console.log('âœ… í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ');
  displaySavedData();
  
  // ì˜¤ëŠ˜ ë‚ ì§œ ìë™ ì„¤ì •
  const today = new Date().toISOString().split('T')[0];
  document.getElementById('date').value = today;
});

console.log('âœ… ëª¨ë“  ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì™„ë£Œ');
</script>

</body>
</html>
